---
# Please do not edit this file directly; it is auto generated.
# Instead, please edit 15-farver-og-striber.md in _episodes_rmd/
title: "Farver og striber"
teaching: 0
exercises: 0
questions:
- "Hvordan laver jeg mine egne farveskalaer til ggplot?"
- "Hvordan vælger jeg farver der tager hensyn til farveblinde?"
objectives:
- "First learning objective. (FIXME)"
keypoints:
- "First key point. Brief Answer to questions. (FIXME)"
---





Hvordan vælger vi farver til vores plots? Hvordan laver vi vores 
egne paletter.


~~~
library(monochromeR)
~~~
{: .language-r}
Der er mange paletter at arbejde med i mange forskellige pakker.

monochromeR gør det relativt let at lave vores egen:

~~~
generate_palette("red", modification = "go_darker",
                 n_colors = 8, view_palette = T)
~~~
{: .language-r}

<div class="figure" style="text-align: center">
<img src="../fig/rmd-15-unnamed-chunk-3-1.png" alt="plot of chunk unnamed-chunk-3" width="612" />
<p class="caption">plot of chunk unnamed-chunk-3</p>
</div>

~~~
[1] "#FF0000" "#E10000" "#C40000" "#A70000" "#8A0000" "#6D0000" "#500000"
[8] "#330000"
~~~
{: .output}

Og hvis vi vil have blandinger af to farver, eksempelvis hvis vi vil 
have en palette der giver os farver fra en farve til en anden:

~~~
generate_palette("red", blend_color = "blue",
                 n_colors = 7, view_palette = T)
~~~
{: .language-r}



~~~

Because you supplied a blend_colour, the modification variable is set to "blend".
To use other modification options ("go_darker", "go_lighter" or "go_both_ways"),
leave blend_colour as NULL.
~~~
{: .output}

<div class="figure" style="text-align: center">
<img src="../fig/rmd-15-unnamed-chunk-4-1.png" alt="plot of chunk unnamed-chunk-4" width="612" />
<p class="caption">plot of chunk unnamed-chunk-4</p>
</div>

~~~
[1] "#FF0000" "#DD0021" "#BB0043" "#990066" "#770088" "#5500AA" "#3300CC"
~~~
{: .output}

Paletter kan komme fra andre steder. En populær pakke er "wesanderson", der 
leverer paletter baseret på de paletter Wes Anderson bruger i hans film. 

Pakken monochromeR kan også vise dem:


~~~
library(wesanderson)
~~~
{: .language-r}

~~~
view_palette(wesanderson::wes_palettes$FantasticFox1)
~~~
{: .language-r}

<div class="figure" style="text-align: center">
<img src="../fig/rmd-15-unnamed-chunk-6-1.png" alt="plot of chunk unnamed-chunk-6" width="612" />
<p class="caption">plot of chunk unnamed-chunk-6</p>
</div>

## Farveblindhed

Det er ofte en god ide at tjekke hvordan ens palette bliver opfattet af farveblinde.

Pakken colorblindr giver et bud på det. Den skal installeres fra github:


~~~
library(devtools)
remotes::install_github("wilkelab/cowplot")
~~~
{: .language-r}



~~~

── R CMD build ─────────────────────────────────────────────────────────────────
* checking for file ‘/tmp/RtmpdwBTLU/remotes3b156c763d86/wilkelab-cowplot-1f35f38/DESCRIPTION’ ... OK
* preparing ‘cowplot’:
* checking DESCRIPTION meta-information ... OK
* checking for LF line-endings in source and make files and shell scripts
* checking for empty or unneeded directories
Omitted ‘LazyData’ from DESCRIPTION
* building ‘cowplot_1.1.2.tar.gz’
~~~
{: .output}



~~~
install.packages("colorspace", repos = "http://R-Forge.R-project.org")
install_github("clauswilke/colorblindr")
~~~
{: .language-r}



~~~

── R CMD build ─────────────────────────────────────────────────────────────────
* checking for file ‘/tmp/RtmpdwBTLU/remotes3b1532a5677b/clauswilke-colorblindr-e6730be/DESCRIPTION’ ... OK
* preparing ‘colorblindr’:
* checking DESCRIPTION meta-information ... OK
* checking for LF line-endings in source and make files and shell scripts
* checking for empty or unneeded directories
Omitted ‘LazyData’ from DESCRIPTION
* building ‘colorblindr_0.1.0.tar.gz’
~~~
{: .output}

Hvorefter vi kan indlæse den.

~~~
library(colorblindr)
~~~
{: .language-r}



~~~
Loading required package: colorspace
~~~
{: .output}



~~~
Error in value[[3L]](cond): Package 'colorspace' version 2.1.0 cannot be unloaded:
 Error in unloadNamespace(package) : namespace 'colorspace' is imported by 'munsell' so cannot be unloaded
~~~
{: .error}

cvd_grid vil vise os bruger som udgangspunkt det sidste plot vi lavede.

~~~
view_palette(wesanderson::wes_palettes$FantasticFox1)
~~~
{: .language-r}

<div class="figure" style="text-align: center">
<img src="../fig/rmd-15-unnamed-chunk-8-1.png" alt="plot of chunk unnamed-chunk-8" width="612" />
<p class="caption">plot of chunk unnamed-chunk-8</p>
</div>

~~~
cvd_grid()
~~~
{: .language-r}



~~~
Error in cvd_grid(): could not find function "cvd_grid"
~~~
{: .error}

Og det var ethvert plot:


~~~
ggplot(mtcars, aes(cyl, mpg, color = gear)) + 
  geom_point()
~~~
{: .language-r}



~~~
Error in ggplot(mtcars, aes(cyl, mpg, color = gear)): could not find function "ggplot"
~~~
{: .error}



~~~
cvd_grid()
~~~
{: .language-r}



~~~
Error in cvd_grid(): could not find function "cvd_grid"
~~~
{: .error}

Det en person med normalt farvesyn får her, er et estimat af hvordan et plot vil se ud ved forskellige typer af farveblindhed. Og det er nok blot et estimat, men bedre end ingenting.

Der findes forskellige typer af farveblindhed, og derfor får vi fire forskellige plots, et for hver af fire typer:

* Tritanomaly: blå-gul farveblindhed. under 0.01%. Rammer både mænd og kvinder.
* Deutoanomaly: rød-grøn farveblindhed. ca. 6% af mænd
* protanomaly: Rød-grøn farveblindhed- ca. 2% af mænd
* Desaturated forsøger så vidt vi kan gennemskue af pakken, at simulere
total farveblindhed (akromatopsi). Rammer 0.003% 

### Er det noget man skal tage hensyn til? Nej og ja. 

Der er ting det kan være næsten umulige at visualisere i
paletter der tager hensyn til de forskellige former for
farveblindhed. Og helt umulige hvis de skal tage hensyn til 
alle varianterne heraf.

Der er også plots der som deres primære formål har at være
spektakulære. De kan være helt håbløse at lave i udgaver der gør alle glade.

Men når plottets formål er at formidle data, snarere end at
være kunst, bør man. Ikke kun for at tage hensyn til
farveblinde, men også fordi farvevalg der tager det hensyn,
typisk gør det lettere folk læsere med normalt farvesyn at se
forskel på det man vil vise, og fordi farverne også bedre
overlever et print i sort/hvid.

## Hvordan bruger vi så en palette i et plot?

Vi tilføjer en linie til vores plot `scale_fill_manual` eksempelvis:


~~~
mtcars %>% 
  ggplot(aes(hp, fill = factor(am))) +
  geom_histogram(position = "dodge") +
  scale_fill_manual(values=wesanderson::wes_palettes$FantasticFox1)
~~~
{: .language-r}



~~~
Error in ggplot(., aes(hp, fill = factor(am))): could not find function "ggplot"
~~~
{: .error}

~~~
scale_c
~~~
{: .language-r}



~~~
Error in eval(expr, envir, enclos): object 'scale_c' not found
~~~
{: .error}

## rcolorbrewer
Der bør også være noget om rcolorbrewer

{% include links.md %}

