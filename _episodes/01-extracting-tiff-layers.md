---
# Please do not edit this file directly; it is auto generated.
# Instead, please edit 01-extracting-tiff-layers.md in _episodes_rmd/
title: "Extracting tiff-layers"
teaching: 0
exercises: 0
questions:
- "Hvordan ekstraherer jeg lag fra en geotiff fil?"
objectives:
- "FIXME"
keypoints:
- "FIXME"
---





Tiff-filer kan indeholde lag. Vi er stødt på dem i en situation hvor
en studerende havde behov for at trække lagene ud af en 
GeoTIFF fil. 

Her er et eksempel på en tiff-fil med tre lag:

![Trelagstiff](fig/stacked_tiff.tif)


Den kan vi indlæse:


~~~
tif <- raster::stack("fig/stacked_tiff.tif")
~~~
{: .language-r}



~~~
Error in dyn.load(file, DLLpath = DLLpath, ...): unable to load shared object '/home/runner/work/_temp/Library/terra/libs/terra.so':
  libproj.so.15: cannot open shared object file: No such file or directory
~~~
{: .error}
Der er tre lag:

~~~
raster::nlayers(tif)
~~~
{: .language-r}



~~~
Error in dyn.load(file, DLLpath = DLLpath, ...): unable to load shared object '/home/runner/work/_temp/Library/terra/libs/terra.so':
  libproj.so.15: cannot open shared object file: No such file or directory
~~~
{: .error}
De har navne:

~~~
names(tif)
~~~
{: .language-r}



~~~
Error in eval(expr, envir, enclos): object 'tif' not found
~~~
{: .error}
Og vi kan plotte dem individuelt:


~~~
plot(tif$layer.1)
~~~
{: .language-r}



~~~
Error in plot(tif$layer.1): object 'tif' not found
~~~
{: .error}

~~~
plot(tif$layer.2)
~~~
{: .language-r}



~~~
Error in plot(tif$layer.2): object 'tif' not found
~~~
{: .error}

~~~
plot(tif$layer.3)
~~~
{: .language-r}



~~~
Error in plot(tif$layer.3): object 'tif' not found
~~~
{: .error}

Vi kan også gemme dem individuelt:

~~~
writeRaster(tif$layer.3, "filnavn.tif")
~~~
{: .language-r}

## Noter

Filen er grabset fra biblioteket `plainview`, mere specifikt er det et udsnit af
sattelitfotos fra Landsat 8, omkring byen Poppendorf, lidt til højre for Rostock.

Husk også at ikke alle TIFF filer har lag. Så hvis du kun kan trække et enkelt lag ud, så kan det skyldes at der kun er et.

De her lagdelte TIFF filer bruges ofte  til at gennem forskellige "kanaler" i billedet.

Det kan være en kanal med landskabet set i IR-spektret. Eller tre kanaler med hver af farverne rød, grøn og blå. Vælger man kun at kigge på det grønne lag, kan det være lettere at identificere hvor vegetationen er.

{% include links.md %}
